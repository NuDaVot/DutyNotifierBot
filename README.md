# Телеграм-бот для оповещения о дежурных

## Описание
Этот бот автоматически отправляет сообщения в чаты Telegram дважды в день (в 9:30 и 21:30) с информацией о дежурном. Данные о дежурных берутся из Google-таблицы. Если дежурный не найден, бот отправляет сообщение админу.

## Логика работы
1. **Добавление чатов**
   - Бот отслеживает, в какие чаты его добавили, и сохраняет их ID в `chats.txt`.
   
2. **Получение дежурных из Google-таблицы**
   - Бот загружает данные с двух листов:
     - "График дежурств" – содержит даты и ответственных дежурных.
     - "Дежурные" – содержит имена и номера телефонов.
   
3. **Отправка уведомлений**
   - В 9:30 отправляется информация о дневном дежурном.
   - В 21:30 отправляется информация о ночном дежурном.
   - Если дежурный не найден, бот отправляет сообщение админу.
   
4. **Логирование и обработка ошибок**
   - Все действия бота записываются в `bot.log`.
   - Ошибки отправляются админу в личные сообщения.

## Переменные окружения (.env)
Создайте файл `.env` и укажите в нем:
```ini
BOT_TOKEN=ваш_токен_бота
ADMIN_ID=723520057  # ID администратора, которому отправляются ошибки
SCHEDULE_URL=ссылка_на_лист_График_дежурств&gid=0
DUTY_PERSONNEL_URL=ссылка_на_лист_Дежурные&gid=123456789  # замените на реальный gid листа
```

## Структура таблиц
**Лист "График дежурств"** (пример):

| Дата              | Дежурный |
|-------------------|---------|
| 14.03.2025 День  | Артур   |
| 14.03.2025 Ночь  | Егор    |

**Лист "Дежурные"** (пример):

| Имя    | Телефон     |
|--------|-------------|
| Артур  | 89********* |
| Егор   | 89*********  |
| Рафаэль| 89*********  |

## Подключение таблиц
1. Откройте Google-таблицу.
2. Перейдите в "Файл" -> "Опубликовать в интернет".
3. Выберите "CSV" и скопируйте ссылки на соответствующие листы.
4. Вставьте ссылки в `.env` в переменные `SCHEDULE_URL` и `DUTY_PERSONNEL_URL`. Обратите внимание на `gid`, который уникален для каждого листа.

## Установка и запуск
1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Запустите бота:
   ```bash
   python main.py
   ```